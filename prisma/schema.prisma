generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

model User {
  id        String   @id @default(uuid())
  login     String   @unique
  password  String
  version   Int      @default(1)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  roles     Role[]   @default([USER])
  News      News[]
}

enum Role {
  ADMIN
  USER
}

model News {
  id              String   @id @default(uuid())
  title           String
  content         String
  backgroundImage String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  author          User?    @relation(fields: [authorId], references: [id])
  authorId        String?
}

model Tariff {
  id    String      @id @default(uuid())
  title String
  speed Int
  cost  Int
  type  TariffTypes
  Order Order[]
  status TariffStatus @default(active)
}

enum TariffTypes {
  wired
  wireLess
}


enum TariffStatus {
  active
  archived
}

model AccessibleDistrict {
  id       String  @id @default(uuid())
  title String
  code String
  Order    Order[]
}

model Order {
  id                        String             @id @default(uuid())
  familyName                String
  personalName              String
  lastName                  String
  gender                    Gender
  birthday                  DateTime
  passportDate              DateTime
  address                   String
  addressRegistration       String
  passportSeries            String
  passportNumber            String
  passportBranch            String
  passportMainPagePhoto     String
  passportRegistrationPhoto String
  district                  AccessibleDistrict @relation(fields: [districtId], references: [id])
  districtId                String
  tariff                    Tariff             @relation(fields: [tariffId], references: [id])
  tariffId                  String
  status                    OrderStatus        @default(active)
  phoneNumber String
}


enum OrderStatus {
  active
  archived
  canceled
}

enum Gender {
  man
  woman
}
